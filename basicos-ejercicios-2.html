<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ejercicios 2</title>
</head>

<body>
  <h1>Ejercicios 2</h1>
  <script>

    /*
      9) Programa una función que obtenga un numero aleatorio entre 501 y 600.
      */

    const aleatorio = () => console.info(Math.round(Math.random() * 100 + 500));

    //aleatorio();






    /*
     10) Programa una función que reciba un número y evalúe si es capicúa o no(que se lee igual en un sentido que en otro), pe. miFuncion(2002) devolverá true.
      */


    const capicua = (numero = 0) => {
      if (!numero) return console.warn("no ingresaste un numero");

      if (typeof numero !== "number") return console.error(`El valor ${numero} ingresado, NO es un numero`);

      numero = numero.toString();
      let alReves = numero.split("").reverse().join("");

      return (numero === alReves)
        ? console.info(`si es capicua, numero original ${numero}, numero al reves ${alReves}`)
        : console.info(`no es capicua, numero original ${numero}, numero al reves ${alReves}`)

    }


    //capicua();
    //capicua("19");
    //capicua({});
    //capicua(2000);
    //capicua(2002);//



    /*
     11) Programa una función que calcule el factorial de un número(El factorial de un entero positivo n, se define como el producto de todos los números enteros positivos desde 1 hasta n), pe.miFuncion(5) devolverá 120.
      */

    const factorial = (numero = undefined) => {
      if (numero === undefined) return console.warn("no ingresaste un numero");

      if (typeof numero !== "number") return console.error(`el valor "${numero}" ingresando, NO es un numero`);

      if (numero === 0) return console.error("el numero no puede ser 0");

      if (Math.sign(numero) === -1) return console.error('el numero no puede ser negativo')

      let factorial = 1;

      for (let i = numero; i > 1; i--) {

        //factorial = factorial * i;
        factorial *= i;

      }

      return console.info(`el factorial de ${numero} es ${factorial}`)
    };
    //
    //factorial();
    //factorial('5');
    //factorial([1, 2, 3]);
    //factorial(0);
    //factorial(-5);
    //factorial(6);




    /*
    12) Programa una función que determine si un número es primo (aquel que solo es divisible por sí mismo y 1) o no, pe. miFuncion(7) devolverá true.
      */

    const numeroPrimo = (numero = undefined) => {
      if (numero === undefined) return console.warn("no ingresaste un numero");

      if (typeof numero !== "number") return console.error(`el valor "${numero}" ingresando, NO es un numero`);

      if (numero === 0) return console.error("el numero no puede ser 0");

      if (numero === 1) return console.error("el numero no puede ser 1");

      if (Math.sign(numero) === -1) return console.error('el numero no puede ser negativo')

      let divisible = false;

      for (let i = 2; i < numero; i++) {

        if ((numero % i) === 0) {
          divisible = true;
          break;
        }

      }

      return (divisible)
        ? console.log(`el numero ${numero} no es primo`)
        : console.log(`el numero ${numero} si es primo`)
    }

    //numeroPrimo("34");
    //numeroPrimo();
    //numeroPrimo(true);
    //numeroPrimo(0);
    //numeroPrimo(1);
    //numeroPrimo(-12);
    //numeroPrimo(12);
    //numeroPrimo(13);






    /*
    13) Programa una función que determine si un número es par o impar, pe. miFuncion(29) devolverá Impar.
*/

    const numeroParImpar = (numero = undefined) => {

      if (numero === undefined) return console.warn("no ingresaste un numero");

      if (typeof numero !== "number") return console.error(`el valor "${numero}" ingresado, no es un numero`);

      return ((numero % 2) === 0)
        ? console.info(`el numero ${numero} es par`)
        : console.info(`el numero ${numero} es impar`)
    }

    //numeroParImpar();
    //numeroParImpar('2334');
    //numeroParImpar(-445);
    //numeroParImpar(-446);





    /*
    14) Programa una función para convertir grados Celsius a Fahrenheit y viceversa, pe. miFuncion(0,"C") devolverá 32°F.
     */

    const convertirGrados = (grados = undefined, unidad = undefined) => {

      if (grados === undefined) return console.warn("no ingresaste grados a convertir");

      if (typeof grados !== "number") return console.error(`el valor "${grados}" ingresado, no es un numero`);

      if (unidad === undefined) return console.warn("no ingresaste el tipo de grado a convertir");

      if (typeof unidad !== "string") return console.error(`el valor "${unidad}" ingresado, no es una cadena de texto`);

      if (unidad.length !== 1 || !/(C|F)/.test(unidad)) return console.warn("valor de unidad no reconocido")

      if (unidad === "C") {
        return console.info(`${grados} °C = ${Math.round((grados * (9 / 5)) + 32)} °F`);
      }

      if (unidad === "F") {
        return console.info(`${grados} °F = ${Math.round(((grados - 32) * (5 / 9)))} °C`);
      }

      console.info("wii")

    }

    //convertirGrados();
    //convertirGrados("2");
    //convertirGrados(2);
    //convertirGrados(2,true);
    //convertirGrados(2,"hola");
    //convertirGrados(2,"e");
    //convertirGrados(2,"c");
    //convertirGrados(0,"C");
    //convertirGrados(100,"C");
    //convertirGrados(0,"F");
    //convertirGrados(32,"F");
    //convertirGrados(100,"F");
    //convertirGrados(2,"F");




    /*
        15) Programa una función para convertir números de base binaria a decimal y viceversa, pe.miFuncion(100, 2) devolverá 4 base 10.
         */

    const convertirBinarioDecinal = (numero = undefined, base = undefined) => {
      if (numero === undefined) return console.warn("no ingresaste numero a convertir");

      if (typeof numero !== "number") return console.error(`el valor "${numero}" ingresado, no es un numero`);

      if (base === undefined) return console.warn("no ingresaste la base a convertir");

      if (typeof base !== "number") return console.error(`el valor "${base}" ingresado, no es un numero`);

      if (base === 2) {
        return console.info(`${numero} base ${base} = ${parseInt(numero, base)} base 10`);
      } else if (base === 10) {
        return console.info(`${numero} base ${base} = ${(numero.toString(base))} base 2`);
      }
    }

    //convertirBinarioDecinal();
    //convertirBinarioDecinal("2");
    //convertirBinarioDecinal(100);
    //convertirBinarioDecinal(100, "2");
    //convertirBinarioDecinal(101, 2);
    //convertirBinarioDecinal(5, 10);






    /*
      16) Programa una función que devuelva el monto final después de aplicar un descuento a una cantidad dada, pe.miFuncion(1000, 20) devolverá 800.
      */

    const aplicarDescuento = (monto = undefined, descuento = 0) => {
      if (monto === undefined) return console.warn("no ingresaste el monto");

      if (typeof monto !== "number") return console.error(`el valor "${monto}" ingresado, no es un numero`);

      if (monto === 0) return console.error('el monto no puede ser cero')

      if (Math.sign(monto) === -1) return console.error('el monto no puede ser negativo');

      if (typeof descuento !== "number") return console.error(`el valor "${descuento}" ingresado, no es un numero`)

      if (Math.sign(descuento) === -1) return console.error('el descuento no puede ser negativo');

      return console.info(`$${monto} - $${descuento}% = $${monto - ((monto * descuento) / 100)}`)
    }

    //aplicarDescuento();
    //aplicarDescuento("200");
    //aplicarDescuento(0);
    //aplicarDescuento(-1000);
    //aplicarDescuento(1000,"20");
    //aplicarDescuento(1000,-20);
    //aplicarDescuento(1000,25);



    /*
      17) Programa una función que dada una fecha válida determine cuantos años han pasado hasta el día de hoy, pe.miFuncion(new Date(1984, 4, 23)) devolverá 35 años(en 2020).
       */

    const calcularAnios = (fecha = undefined) => {
      if (fecha === undefined) return console.warn('no ingresaste la fecha');

      if (!(fecha instanceof Date)) return console.error("el valor que ingresaste no es una fecha valida");

      let hoyMenosFecha = new Date().getTime() - fecha.getTime(),
        aniosEnMS = 1000 * 60 * 60 * 24 * 365
      aniosHumanos = Math.floor(hoyMenosFecha / aniosEnMS);

      return (Math.sign(aniosHumanos) === -1)
        ? console.info(`faltan ${Math.abs(aniosHumanos)} años para el ${fecha.getFullYear()}`)
        : (Math.sign(aniosHumanos) === 1)
          ? console.info(`han pasado ${aniosHumanos} años, desde ${fecha.getFullYear()}`)
          : console.info(`estamos en el año actual ${fecha.getFullYear()}`)




    }



    //calcularAnios()
    //calcularAnios({})
    //calcularAnios(false)
    //calcularAnios(new Date())
    //calcularAnios(new Date(2984,8,18))


    /*
        18) Programa una función que dada una cadena de texto cuente el número de vocales y consonantes, pe.miFuncion("Hola Mundo") devuelva Vocales: 4, Consonantes: 5.
             */


    const contarLetras = (cadena = "") => {
      if (!cadena) return console.warn("No ingresaste una cadena de texto");
      if (typeof cadena !== "string") return console.error(`El valor "${cadena}" ingresado, NO es una cadena de texto`);
      let vocales = 0,
        consonantes = 0;
      cadena = cadena.toLocaleLowerCase();
      for (let letra of cadena) {
        if (/[aeiouáéíóúü]/.test(letra)) vocales++;
        if (/[bcdfghjklmnopqrstvwxyz]/.test(letra)) consonantes++;//
      }

      return console.info({
        cadena,
        vocales,
        consonantes
      })
    }

    //contarLetras();
    //contarLetras(3);
    //contarLetras("hola mundo");











    /*
  19) Programa una función que valide que un texto sea un nombre válido, pe.miFuncion("Jonathan MirCha") devolverá verdadero.
      */

    const validaNombre = (nombre = "") => {
      if (!nombre) return console.warn("No ingresaste un nombre");

      if (typeof nombre !== "string") return console.error(`El valor "${nombre}" ingresado, NO es una cadena de texto`);

      let expReg = /^[A-Za-zÑñÁáÉéÍíÓóÚúÜü\s]+$/g.test(nombre);

      return (expReg)
        ? console.info(`"${nombre}", es un nombre valido`)
        : console.warn(`"${nombre}", no un nombre valido`)
    }

    //validaNombre()
    //validaNombre(3)
    //validaNombre("javier henao")





    /*
20) Programa una función que valide que un texto sea un email válido, pe.miFuncion("jonmircha@gmail.com") devolverá verdadero.
*/

    const validarEmail = (email = "") => {
      if (!email) return console.warn("No ingresaste un email");

      if (typeof email !== "string") return console.error(`El valor "${email}" ingresado, NO es un tipo email`);

      let expReg = /[a-z0-9]+(\.[_a-z0-9]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,15})/i.test(email);

      return (expReg)
        ? console.info(`"${email}", es un email valido`)
        : console.warn(`"${email}", no es un email valido`)
    }

    //validarEmail()
    //validarEmail(3)
    //validarEmail("sdfasfgsdfgdsfg")
    //validarEmail("jav,kjhsadf.com")
    //validarEmail("javierhenao@gmail.com")






    /*
      21) Programa una función que dado un array numérico devuelve otro array con los números elevados al cuadrado, pe.mi_funcion([1, 4, 5]) devolverá[1, 16, 25].
      */


    const devolverCuadrados = (arr = undefined) => {
      if (arr === undefined) return console.warn("No ingresaste un arreglo de números");
      if (!(arr instanceof Array)) return console.error("El valor que ingresaste no es un arreglo");
      if (arr.length === 0) return console.error("El arreglo esta vacío");
      for (let num of arr) {
        if (typeof num !== "number") return console.error(`El valor "${num}" ingresado, NO es un número`)
      }

      const newArr = arr.map(el => el * el);

      return console.info(`arreglo original: ${arr}\narreglo elevado al cuadrado: ${newArr}`)
    }

    //devolverCuadrados()
    //devolverCuadrados(true)
    //devolverCuadrados({})
    //devolverCuadrados([])
    //devolverCuadrados([1,"3",4,{}])
    //devolverCuadrados([1,4,{}])
    //devolverCuadrados([1,4,8])





    /*
    22) Programa una función que dado un array devuelva el número mas alto y el más bajo de dicho array, pe.miFuncion([1, 4, 5, 99, -60]) devolverá[99, -60].
    */



    const arrayMinMax = (arr = undefined) => {
      if (arr === undefined) return console.warn("No ingresaste un arreglo de números");

      if (!(arr instanceof Array)) return console.error("El valor que ingresaste no es un arreglo");

      if (arr.length === 0) return console.error("El arreglo esta vacío");

      for (let num of arr) {

        if (typeof num !== "number") return console.error(`El valor "${num}" ingresado, NO es un número`)
      }

      return console.info(`Arreglo original: ${arr}\nValor mayor:${Math.max(...arr)}, \nValor menor:${Math.min(...arr)}`)

    }

    //arrayMinMax()
    //arrayMinMax(false)
    //arrayMinMax([])
    //arrayMinMax([2,3,true])
    //arrayMinMax([1, 4, 5, 99, -60])




    /*
    23) Programa una función que dado un array de números devuelva un objeto con 2 arreglos en el primero almacena los números pares y en el segundo los impares, pe.miFuncion([1, 2, 3, 4, 5, 6, 7, 8, 9, 0]) devolverá { pares: [2, 4, 6, 8, 0], impares: [1, 3, 5, 7, 9] }.
    */

    const separarParesImpares = (arr = undefined) => {

      if (arr === undefined) return console.warn("No ingresaste un arreglo de números");

      if (!(arr instanceof Array)) return console.error("El valor que ingresaste no es un arreglo");

      if (arr.length === 0) return console.error("El arreglo esta vacío");

      for (let num of arr) {

        if (typeof num !== "number") return console.error(`El valor "${num}" ingresado, NO es un número`)
      }

      return console.info({
        pares: arr.filter(num => num % 2 === 0),
        impares: arr.filter(num => num % 2 === 1),

      })


    }

    //separarParesImpares()
    //separarParesImpares("hola")
    //separarParesImpares([1, 2, 3, 4, 5, 6, 7, 8, 9, 0])







    /*
    La expresión regular que uso para el email en este video / [a - z0 - 9] + (\.[_a - z0 - 9] +)* @[a - z0 - 9 -] + (\.[a - z0 - 9 -] +)* (\.[a - z]{ 2, 15 }) /i
    */


    /*
        24) Programa una función que dado un arreglo de números devuelva un objeto con dos arreglos, el primero tendrá los numeros ordenados en forma ascendente y el segundo de forma descendiente, pe.miFuncion([7, 5, 7, 8, 6]) devolverá { asc: [5, 6, 7, 7, 8], desc: [8, 7, 7, 6, 5] }.
        */

    const ordenarArreglo = (arr = undefined) => {

      if (arr === undefined) return console.warn("No ingresaste un arreglo de números");

      if (!(arr instanceof Array)) return console.error("El valor que ingresaste no es un arreglo");

      if (arr.length === 0) return console.error("El arreglo esta vacío");

      for (let num of arr) {

        if (typeof num !== "number") return console.error(`El valor "${num}" ingresado, NO es un número`)
      }

      return console.info({
        arr,
        asc: arr.map(el => el).sort(),
        desc: arr.map(el => el).sort().reverse()
      });


    }

    //ordenarArreglo()
    //ordenarArreglo("hola")
    //ordenarArreglo([])
    //ordenarArreglo([3,{}])
    //ordenarArreglo([7, 5, 7, 8, 6])




    /*
      25) Programa una función que dado un arreglo de elementos, elimine los duplicados, pe.miFuncion(["x", 10, "x", 2, "10", 10, true, true]) devolverá["x", 10, 2, "10", true].
      */

    const quitarDuplicados = (arr = undefined) => {

      if (arr === undefined) return console.warn("No ingresaste un arreglo de números");

      if (!(arr instanceof Array)) return console.error("El valor que ingresaste no es un arreglo");

      if (arr.length === 0) return console.error("El arreglo esta vacío");

      if (arr.length === 1) return console.error("El arreglo debe tener al menos 2 elementos");



      /*  return console.info({
         original:arr,
         sinDuplicados:arr.filter((value,index,self)=>self.indexOf(value)===index)
       }); */

      return console.info({
        original: arr,
        sinDuplicados: [new Set(arr)]
      });



    }

    //quitarDuplicados()
    //quitarDuplicados({})
    //quitarDuplicados([])
    //quitarDuplicados([2])
    //quitarDuplicados(["x", 10, "x", 2, "10", 10, true, true])



    /*
26) Programa una función que dado un arreglo de números obtenga el promedio, pe.promedio([9, 8, 7, 6, 5, 4, 3, 2, 1, 0]) devolverá 4.5.
*/

    const promedio = (arr = undefined) => {

      if (arr === undefined) return console.warn("No ingresaste un arreglo de números");

      if (!(arr instanceof Array)) return console.error("El valor que ingresaste no es un arreglo");

      if (arr.length === 0) return console.error("El arreglo esta vacío");

      for (let num of arr) {

        if (typeof num !== "number") return console.error(`El valor "${num}" ingresado, NO es un número`)
      }

      return console.info(
        arr.reduce((total, num, index, arr) => {
          total += num;
          if (index === arr.length - 1) {
            return `El promedio de ${arr.join(" + ")} es ${total / arr.length}`
          } else {
            return total;
          }
        })
      )


    }

    //promedio()
    //promedio({})
    //promedio([])
    //promedio([2,true])
    //promedio([9, 8, 7, 6, 5, 4, 3, 2, 1, 0])



    /*
    
    27) Programa una clase llamada Pelicula.
    
    La clase recibirá un objeto al momento de instanciarse con los siguentes datos: id de la película en IMDB, titulo, director, año de estreno, país o países de origen, géneros y calificación en IMBD.
      - Todos los datos del objeto son obligatorios.
      - Valida que el id IMDB tenga 9 caracteres, los primeros 2 sean letras y los 
        7 restantes números.
      - Valida que el título no rebase los 100 caracteres.
      - Valida que el director no rebase los 50 caracteres.
      - Valida que el año de estreno sea un número entero de 4 dígitos.
      - Valida que el país o paises sea introducidos en forma de arreglo.
      - Valida que los géneros sean introducidos en forma de arreglo.
      - Valida que los géneros introducidos esten dentro de los géneros 
        aceptados*.
      - Crea un método estático que devuelva los géneros aceptados*.
      - Valida que la calificación sea un número entre 0 y 10 pudiendo ser 
        decimal de una posición.
      - Crea un método que devuelva toda la ficha técnica de la película.
      - Apartir de un arreglo con la información de 3 películas genera 3 
        instancias de la clase de forma automatizada e imprime la ficha técnica 
        de cada película.
    
    * Géneros Aceptados: Action, Adult, Adventure, Animation, Biography, Comedy, Crime, Documentary ,Drama, Family, Fantasy, Film Noir, Game-Show, History, Horror, Musical, Music, Mystery, News, Reality-TV, Romance, Sci-Fi, Short, Sport, Talk-Show, Thriller, War, Western.
    */


    class Pelicula {
      constructor({ id, titulo, director, estreno, pais, generos, calificacion }) {
        this.id = id;
        this.titulo = titulo;
        this.director = director;
        this.estreno = estreno;
        this.pais = pais;
        this.generos = generos;
        this.calificacion = calificacion;

        this.validarIMDB(id);
        this.validarTitulo(titulo);
        this.validarDirector(director);
        this.validarEstreno(estreno);
        this.validarPais(pais);
        this.validarGeneros(generos);
        this.validarCalificacion(calificacion);

      }


      static get listaGeneros() {
        return ["Action", "Adult", "Adventure", "Animation", "Biography", "Comedy", "Crime", "Documentary", "Drama", "Family", "Fantasy", "Film Noir", "Game-Show", "History", "Horror", "Musical", "Music", "Mystery", "News", "Reality-TV", "Romance", "Sci-Fi", "Short", "Sport", "Talk-Show", "Thriller", "War", "Western"];
      }


      static generosAceptados() {
        return console.info(`Los géneros aceptados son: ${Pelicula.listaGeneros.join(", ")}`);
      }

      validarCadena(propiedad, valor) {
        if (!valor) return console.warn(`${propiedad} "${valor}" esta vacío`);
        if (typeof valor !== "string")
          return console.error(
            `${propiedad} "${valor}" ingresado, NO es una cadena de texto`
          );

        return true;
      }

      validarLongitudCadena(propiedad, valor, longitud) {
        if (valor.length > longitud) return console.error(`${propiedad} "${valor}" excede el numero de caracteres permitidos (${longitud})`);


        return true;
      }

      validarIMDB(id) {
        if (this.validarCadena("IMDB-id", id))
          if (!/^([a-z]){2}([0-9]){7}$/.test(id))
            return console.error(
              `IMDB id "${id}" no es válido, debe tener 9 caracteres, los 2 primeros letras minúsculas, los 7 restantes números.`
            );
      };

      validarArreglo(propiedad, valor) {
        if (!valor) return console.warn(`${propiedad} "${valor}" esta vacío`);
        if (!(valor instanceof Array)) return console.error(`${propiedad} "${valor}"  ingresado no es un arreglo`);
        if (valor.length === 0) return console.error(`${propiedad} "${valor}"  esta vacío`);
        for (let cadena of valor) {
          if (typeof cadena !== "string") return console.error(`El valor "${cadena}" ingresado, NO es una cadena de texto`)
        }


        return true;
      }

      validarTitulo(titulo) {
        if (this.validarCadena("Titulo", titulo))
          this.validarLongitudCadena("Titulo", titulo, 100)
      };

      validarDirector(director) {
        if (this.validarCadena("Director", director))
          this.validarLongitudCadena("Director", director, 50)
      };

      validarNumero(propiedad, valor) {
        if (!valor) return console.warn(`${propiedad} "${valor}" esta vacío`);
        if (typeof valor !== "number")
          return console.error(
            `${propiedad} "${valor}" ingresado, NO es un numero`
          );

        return true;
      }


      validarEstreno(estreno) {
        if (this.validarNumero("Año de estreno", estreno))
          if (!(/^([0-9]){4}$/.test(estreno)))
            return console.error(
              `Año de estreno"${estreno}" no es válido, debe ser un numero de 4 digitos.`
            );
      };


      validarPais(pais) {
        this.validarArreglo("Pais", pais);
      }

      validarPais(pais) {
        this.validarArreglo("Pais", pais);
      }

      validarGeneros(generos) {
        if (this.validarArreglo("Generos", generos)) {
          for (let genero of generos) {
            console.log(genero, Pelicula.listaGeneros.includes(genero));
            if (Pelicula.listaGeneros.includes(genero)) {
              console.error(`Genero(s) incorrecto(s) "${generos.join(", ")}"`);
              Pelicula.generosAceptados();
            }
          }
        }
      }

      validarCalificacion(calificacion) {
        if (this.validarNumero("Calificacion", calificacion))
          return (calificacion < 0 || calificacion > 10)
            ? console.error(`La calificacion tiene que estar entre un rango de 0 y 10`)
            : this.calificacion = calificacion.toFixed(1);
      }



      fichaTecnica() {
        console.info(`Ficha Técnica: \nTítulo: "${this.titulo}"\nDirector: "${this.director}"\nAño: "$ {this.estreno}"\nPaís: "${this.pais.join("-")}"\nGéneros: "${this.generos.join(", ")}"\nCalificación: "${this.calificacion}"\nIMDB - Id: "${this.id}"`)
      }
    }


    //Pelicula.generosAceptados();

    /* const peli = new Pelicula({
      id: "tt1234567",
      titulo: "pelikula",
      director: "direktor",
      estreno: 2024,
      pais: ["colombia"],
      generos: ["Comedy", "Humor Negro", "Sport"],
      calificacion: 8.78090
    });


    peli.fichaTecnica(); */

    //min  v

  </script>
</body>

</html>